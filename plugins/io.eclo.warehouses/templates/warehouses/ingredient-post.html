<div class="modal fade modal-load <?=$jatbi->ajax('load')?>" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg pt-standalone">
        <div class="modal-content rounded-5 border-0 shadow-lg">
            <div class="d-flex w-100 justify-content-end align-items-center position-relative">
                <button type="button" class="btn btn-eclo position-absolute z-1 rounded-circle d-flex align-items-center justify-content-center" data-bs-dismiss="modal" aria-label="Close" style="width:50px;height:50px;top:-5px;right:-5px">
                    <i class="ti ti-x fs-4"></i>
                </button>
            </div>
            <div class="modal-body">
                <h5 class="fw-bold text-body mb-3"><?=$title?></h5>
                <form method="POST" action="<?=$_SERVER['REQUEST_URI']?>" class="ajax-form">
                    <div class="row">
                        <div class="col-sm-6">
                            <?=$app->component('select', [
                                "name" => 'type',
                                "class" => "ingredient-type",
                                "selected" => $data['type'] ?? '1',
                                "placeholder" => $jatbi->lang("Loại"),
                                "required" => true,
                                "options" => [
                                    ["value" => "1", "text" => $jatbi->lang("Đai")],
                                    ["value" => "2", "text" => $jatbi->lang("Ngọc")],
                                    ["value" => "3", "text" => $jatbi->lang("Khác")]
                                ]
                            ])?>
                            
                            <div class="dai">
                                
                                <?=$app->component('input', ["name" => 'number', "placeholder" => $jatbi->lang("Mã"), "value" => $data['number'] ?? '', "required" => true])?>
                                <?=$app->component('select', ["name" => 'colors', "placeholder" => $jatbi->lang("Màu sắc"), "options" => $colors ?? [], "selected" => $data['colors'] ?? '', "required" => true])?>
                                <?=$app->component('select', ["name" => 'group', "placeholder" => $jatbi->lang("Nhóm sản phẩm"), "options" => $groups ?? [], "selected" => $data['group'] ?? '', "required" => true])?>
                                <?=$app->component('select', ["name" => 'categorys', "placeholder" => $jatbi->lang("Danh mục"), "options" => $categorys ?? [], "selected" => $data['categorys'] ?? '', "required" => true])?>
                            </div>

                            <div class="ngoc">
                                <?=$app->component('select', ["name" => 'pearl', "placeholder" => $jatbi->lang("Loại ngọc"), "options" => $pearls ?? [], "selected" => $data['pearl'] ?? '', "required" => true])?>
                                <?=$app->component('select', ["name" => 'sizes', "placeholder" => $jatbi->lang("Li ngọc"), "options" => $sizes ?? [], "selected" => $data['sizes'] ?? '', "required" => true])?>
                                <?=$app->component('select', ["name" => 'colors1', "placeholder" => $jatbi->lang("Màu sắc"), "options" => $colors ?? [], "selected" => $data['colors'] ?? '', "required" => true])?>
                                <?=$app->component('input', ["name" => 'quality', "placeholder" => $jatbi->lang("Chất lượng"), "value" => $data['quality'] ?? '', "required" => true])?>
                            </div>
                            
                            <div class="khac">
                                <?=$app->component('input', ["name" => 'ingredient1', "placeholder" => $jatbi->lang("Tên nguyên liệu"), "value" => $data['name_ingredient'] ?? '', "required" => true])?>
                                <?=$app->component('input', ["name" => 'number1', "placeholder" => $jatbi->lang("Mã"), "value" => $data['number'] ?? '', "required" => true])?>
                                <?=$app->component('select', ["name" => 'group1', "placeholder" => $jatbi->lang("Nhóm sản phẩm"), "options" => $groups ?? [], "selected" => $data['group'] ?? '', "required" => true])?>
                            </div>

                            <?=$app->component('select', ["name" => 'units', "placeholder" => $jatbi->lang('Đơn vị'), "options" => $units ?? [], "selected" => $data['units'] ?? ''])?>
                        </div>
                        
                        <div class="col-sm-6">
                            <?=$app->component('input', ["name" => 'price', "type"=> "tel", "placeholder" => $jatbi->lang("Giá bán"), "value" => $data['price'] ?? '', "attr"        => 'data-number="money" data-currency="" data-decimals="0" data-thousands="," data-decimal="."'])?>
                            <?=$app->component('input', ["name" => 'cost', "type"=> "tel", "placeholder" => $jatbi->lang("Giá vốn"), "value" => $data['cost'] ?? '', "attr"        => 'data-number="money" data-currency="" data-decimals="0" data-thousands="," data-decimal="."'])?>
                            <?=$app->component('textarea', ["name" => 'notes', "placeholder" => $jatbi->lang("Ghi chú"), "value" => $data['notes'] ?? '', "attr" => 'style="height: 180px;"',  "required" => true])?>
                            <?=$app->component('select-status', ["placeholder" => $jatbi->lang("Trạng thái"), "value" => $data['status'] ?? 'A'])?>
                        </div>
                        
                        <div class="col-lg-12 mt-3">
                            <button type="submit" class="btn btn-eclo w-100 py-3 rounded-pill fw-bold" data-action="submit" data-alert="true" data-load="this" ><?=$jatbi->lang("Hoàn thành")?></button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function() {

    const typeSelect = $('.ingredient-type');
    
    const sections = {
        '1': $(".dai"),
        '2': $(".ngoc"),
        '3': $(".khac")
    };

    function toggleSections(selectedValue) {
        Object.values(sections).forEach(section => section.hide());
        if (sections[selectedValue]) {
            sections[selectedValue].show();
        }
    }

    typeSelect.on("change", function() {
        toggleSections($(this).val());
    }).trigger('change');
});
</script>