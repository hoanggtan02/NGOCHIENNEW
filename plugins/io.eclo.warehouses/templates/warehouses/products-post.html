<div class="modal fade modal-load <?=$jatbi->ajax('load')?>" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg pt-standalone">
        <div class="modal-content rounded-5 border-0 shadow-lg">
            <div class="d-flex w-100 justify-content-end align-items-center position-relative">
                <button type="button"
                    class="btn btn-eclo position-absolute z-1 rounded-circle d-flex align-items-center justify-content-center width height top right"
                    data-bs-dismiss="modal" aria-label="Close "
                    style="--width:50px;--height:50px;--top:-5px;--right:-5px">
                    <i class="ti ti-x fs-4"></i>
                </button>
            </div>
            <div class="modal-body">
                <h5 class="fw-bold text-body mb-3">
                    <?=$title?>
                </h5>
                <form method="POST" action="<?=$_SERVER['REQUEST_URI']?>">
                    <div class="modal-body">
                        <div class="row g-3">
                            <div class="col-lg-4">
                                <h6 class="fw-bold mb-3"><?=$jatbi->lang('Thông tin chung')?></h6>
                                <?=$app->component('select', ["name" => 'main', "placeholder" => $jatbi->lang("Sản phẩm chính"), "options" => $main_products ?? []])?>
                                <?=$app->component('input', ["name" => 'code', "placeholder" => $jatbi->lang("Mã sản phẩm"), "value" => $data['code_products'] ?? '', "required" => true])?>
                                <?=$app->component('input', ["name" => 'name', "placeholder" => $jatbi->lang("Tên sản phẩm"), "value" => $data['name'] ?? '', "required" => true])?>

                                <h6 class="fw-bold mb-3 mt-4"><?=$jatbi->lang('Phân loại')?></h6>
                                <?=$app->component('select', ["name" => 'group', "placeholder" => $jatbi->lang("Nhóm sản phẩm"), "options" => $groups ?? [], "selected" => $data['group'] ?? ''])?>
                                <?=$app->component('select', ["name" => 'categorys', "placeholder" => $jatbi->lang("Danh mục"), "options" => $categorys ?? [], "selected" => $data['categorys'] ?? '', "required" => true])?>
                                <?=$app->component('select', ["name" => 'units', "placeholder" => $jatbi->lang("Đơn vị"), "options" => $units ?? [], "selected" => $data['units'] ?? '', "required" => true])?>
                            </div>

                            <div class="col-lg-4">
                                <h6 class="fw-bold mb-3"><?=$jatbi->lang('Giá & Thuộc tính')?></h6>
                                <?=$app->component('input-price-vat', [
                                    "placeholder" => $jatbi->lang('Giá bán'),
                                    "type" => 'tel',
                                    "attr" => 'data-number="money" data-currency="" data-decimals="0" data-thousands="," data-decimal="."',
                                    "price_value" => $data['price'] ?? '',
                                    "vat_type_value" => $data['vat_type'] ?? 1,
                                    "required" => true
                                ])?>
                                <?=$app->component('input', ["name" => 'vat', "placeholder" => $jatbi->lang("VAT (%)"), "value" => $data['vat'] ?? ''])?>
                                <?=$app->component('select', ["name" => 'default_code', "placeholder" => $jatbi->lang("Mã cố định"), "options" => $default_codes ?? [], "selected" => $data['default_code'] ?? ''])?>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <?=$app->component('select', [
                                        "name" => 'amount_status', 
                                        "placeholder" => $jatbi->lang("Kiểm tra SL"), 
                                        "selected" => $data['amount_status'] ?? 1, 
                                        "options" => [["value" => 1, "text" => "Kích hoạt"], 
                                                    ["value" => 2, "text" => "Không kích hoạt"]],
                                        "required" => true
                                        ])?>
                                    </div>
                                    <div class="col-lg-12">
                                        <?=$app->component('select-status', [
                                        "placeholder" => $jatbi->lang("Trạng thái"), 
                                        "value" => $data['status'] ?? 'A',
                                        ])?>
                                    </div>
                                </div>
                                <?=$app->component('upload-images', ["name"=>'images', "placeholder"=>$jatbi->lang("Hình ảnh"), "value" => $data['image_preview_url'] ?? ''])?>
                            </div>

                            <div class="col-lg-4">
                                <h6 class="fw-bold mb-3"><?=$jatbi->lang('Kích thước (vận đơn)')?></h6>

                                <?=$app->component('input-suffix', [
                                "label" => $jatbi->lang('Cân nặng'),
                                "name" => 'weight',
                                "type" => 'number',
                                "value" => $data['weight'] ?? '',
                                "suffix" => 'gram'
                            ])?>

                                <?=$app->component('input-suffix', [
                                "label" => $jatbi->lang('Chiều cao'),
                                "name" => 'height',
                                "type" => 'number',
                                "value" => $data['height'] ?? '',
                                "suffix" => 'mm'
                            ])?>

                                <?=$app->component('input-suffix', [
                                "label" => $jatbi->lang('Chiều ngang'),
                                "name" => 'width',
                                "type" => 'number',
                                "value" => $data['width'] ?? '',
                                "suffix" => 'mm'
                            ])?>

                                <h6 class="fw-bold mb-3 mt-4"><?=$jatbi->lang('Kế toán')?></h6>
                                <?=$app->component('select', ["name" => 'tkno', "placeholder" => $jatbi->lang("Tài khoản nợ"), "options" => $accountants ?? [], "selected" => $data['tkno'] ?? ''])?>
                                <?=$app->component('select', ["name" => 'tkco', "placeholder" => $jatbi->lang("Tài khoản có"), "options" => $accountants ?? [], "selected" => $data['tkco'] ?? ''])?>
                            </div>

                            <?php if(empty($data['id'])): ?>
                            <div class="col-md-12">
                                <hr class="my-3">
                                <div class="row">
                                    <div class="col-md-6">
                                        <?=$app->component('select', [
                                            "name" => 'stores',
                                            "placeholder" => $jatbi->lang('Cửa hàng'),
                                            "class" => "filter-name",
                                            "options" => $stores,
                                            "selected" => $_GET['stores'] ?? '',
                                            "id" => "stores",
                                        ])?>
                                    </div>
                                    <div class="col-md-6">
                                        <?=$app->component('select',[
                                            "name"=>'branch',
                                            "placeholder" => $jatbi->lang("Quầy hàng"), 
                                            "selected" =>($data['branch'] ?? ''),
                                            "attr" => 'data-width="100%" data-parent="#stores" 
                                            data-load="true" 
                                            data-url="/api/branch" 
                                            data-method="POST" 
                                            data-keyword="keyword" 
                                            data-max-length="1" ',
                                            "id" => "branch",                                                
                                            ])?>
                                    </div>
                                </div>
                            </div>
                            <?php endif; ?>

                            <div class="col-lg-12">
                                <?=$app->component('textarea', ["name" => 'notes', "placeholder" => $jatbi->lang("Ghi chú"), "value" => $data['notes'] ?? ''])?>
                            </div>
                            <div class="col-lg-12">
                                <button type="submit" class="btn btn-eclo w-100 py-3 rounded-pill fw-bold"
                                    data-action="submit" data-alert="true"
                                    data-load="this"><?=$jatbi->lang("Hoàn thành")?></button>
                            </div>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>